import { vcState } from "@/recoil/atoms";
import React, { useEffect, useState } from "react";
import { useRecoilValue } from "recoil";
import style from "./credential.module.css";

function Credential({ imgUrl, detail, title, date, rating }) {
  const [showModal, setShowModal] = useState(false);
  const [isHover, setIsHover] = useState(false);
  const [today, setToday] = useState(new Date());
  const vc = useRecoilValue(vcState);

  useEffect(() => {
    // alert(isHover);
  }, [isHover]);
  return (
    <>
      <div
        onClick={(_) => setShowModal(true)}
        className={`${style.credential} ${isHover && style.hover}`}
      >
        <img
          onMouseOver={(e) => {
            e.stopPropagation();
            setIsHover(true);
          }}
          onMouseOut={(e) => {
            e.stopPropagation();
            setIsHover(false);
          }}
          alt=""
          src={imgUrl}
        ></img>
        <div className={isHover ? style.detail : style.hide}>
          <h5>{title}</h5>
          <p>{date}</p>
          <p className={style.rating}>
            <span>평점</span>🌟{rating}
          </p>
        </div>
      </div>
      {showModal && (
        <div onClick={(_) => setShowModal(false)} className={style.modal}>
          <div onClick={(e) => e.stopPropagation()} className="movie-modal">
            <svg
              onClick={(_) => setShowModal(false)}
              className={style.xbutton}
              version="1.0"
              xmlns="http://www.w3.org/2000/svg"
              width="25px"
              height="25px"
              viewBox="0 0 512.000000 512.000000"
              preserveAspectRatio="xMidYMid meet"
            >
              <g
                transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
                fill="#ffffff"
                stroke="none"
              >
                <path
                  d="M2492 5109 c-45 -13 -108 -80 -121 -126 -7 -26 -11 -392 -11 -1130
l0 -1093 -1113 -2 -1113 -3 -41 -27 c-63 -41 -88 -90 -88 -169 0 -54 5 -72 27
-106 15 -22 44 -51 65 -64 l38 -24 1112 -3 1113 -2 2 -1113 3 -1112 24 -38
c13 -21 42 -50 64 -65 34 -23 52 -27 107 -27 55 0 73 4 107 27 22 15 51 44 64
65 l24 38 3 1112 2 1113 1113 2 1112 3 38 24 c21 13 50 42 65 64 23 34 27 52
27 107 0 55 -4 73 -27 107 -15 22 -44 51 -65 64 l-38 24 -1112 3 -1113 2 -2
1113 -3 1112 -24 38 c-47 76 -151 113 -239 86z"
                />
              </g>
            </svg>
            <h2>{title} 사용동의서</h2>
            <p>
              <span>발급일자</span>:
              <span>{vc?.vc.credentialSubject.user.DateOfIssue}</span>
            </p>

            <div className="movie-description margin-20px">
              <div>
                <h3>동의 정보</h3>
                <p>
                  <span>영화제목</span>
                  {title}
                </p>
                <p>
                  <span>계약체결일</span>
                  {vc?.vc.credentialSubject.user.DateOfIssue}
                </p>
                <p>
                  <span>사용가능시간 </span>
                  <br></br>
                  {vc?.vc.credentialSubject.contents.contentsTime}
                </p>
                <p>
                  <span>배급사 id </span>
                  <br></br>
                  {vc?.iss}
                </p>
                <p>
                  <span>나의 id </span>
                  <br></br>
                  {vc?.sub}
                </p>
              </div>
              <img alt="" src={imgUrl}></img>
            </div>
            <div className="vc">
              제작사 :{" "}
              {/* <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 784.2 1000">
                <g id="레이어_2">
                  <g id="레이어_1-2">
                    <path
                      d="M773.33,999.51a10.89,10.89,0,1,0-10.91-10.89,11,11,0,0,0,10.91,10.89M696.76,973c5.69,18.2,17.06,26.66,32.5,26.66,16.76,0,30.71-13.5,30.71-31.38,0-12.52-5.52-22.1-17.22-30.72l-12.21-9.11c-7.3-5.36-10.87-10.89-10.87-17.07,0-5.36,3.57-10.08,9.42-10.08,7.64,0,11.7,6,14.32,15.44l15.77-9.42c-5.35-16.75-15.44-23.74-29.26-23.74-15.6,0-28.47,12.2-28.47,29.1,0,10.08,3.9,20.32,15.44,28.94l13.53,10.08c6.81,5.2,11.37,10.89,11.37,18a12,12,0,0,1-12,12.2c-9.25,0-14.48-6.83-17.72-18.21Zm-39.34,9.26c-10.58,0-17.23-13.33-17.23-40.64s6.65-40.8,17.23-40.8,17.22,13.49,17.22,40.8-6.68,40.64-17.22,40.64m0,17.72c22.25,0,35.77-19.19,35.77-58.36s-13.69-58.52-35.77-58.52-35.78,19.34-35.78,58.52S635.13,1000,657.42,1000m-60.8-80.15c0,10.57-7.18,17.56-19.5,21.95l-2.79,1V902.3c14.78.65,22.29,7.48,22.29,17.55m2.12,78.69H619l-20-48.29c9.76-7,15.78-16.74,15.78-30.4,0-22.1-17.23-35.11-41.59-35.11H556v113.8h18.39v-36.9l2.11-.66c2.28-.65,4.4-1.46,6.52-2.27Zm-91.39-49.26c11.87-2.92,21.46,1.79,21.46,12,0,11.71-11.21,20-27,20V950.58Zm14.32-33c0,8-6,14.46-16.89,16.74l-2.95.65V902.13c12.37.33,19.84,5.69,19.84,14.15M547,961.15c0-12.36-6.68-21.78-18.06-25.69,6.69-5.69,10.58-13.17,10.58-20.65,0-18.36-15.76-30.07-40.33-30.07H483.61v113.8h15.94c28.8,0,47.48-15.77,47.48-37.39m-118.19-41.3c0,10.57-7.15,17.56-19.51,21.95l-2.76,1V902.3c14.79.65,22.27,7.48,22.27,17.55M431,998.54h20.34l-20-48.29c9.75-7,15.77-16.74,15.77-30.4,0-22.1-17.23-35.11-41.62-35.11H388.2v113.8h18.37v-36.9l2.12-.66c2.27-.65,4.39-1.46,6.5-2.27Zm-105.17,0h54.13V981H344.14V948.79H371v-18H344.14V902.29h32.19l3.58-17.55H325.78Zm-77.87,0H265.8V927.82l29.58,70.72h18V884.74H295.54v70.72L266,884.74h-18Zm-28-78.69c0,10.57-7.15,17.56-19.51,21.95l-2.76,1V902.3c14.79.65,22.27,7.48,22.27,17.55m2.12,78.69h20.31l-20-48.29c9.75-7,15.77-16.74,15.77-30.4,0-22.1-17.23-35.11-41.62-35.11H179.31v113.8h18.37v-36.9l2.11-.66c2.28-.65,4.39-1.46,6.5-2.27Zm-93.65-38.86,9.28-48.6,9.26,48.6Zm-25.68,38.86H121l4.06-21.3h25.36l4.07,21.3h18.85l-22.92-113.8H125.66Zm-79.5,0H41.78l13.81-72.35,13.82,72.35H88l23.4-113.8H93l-14.48,74-14-74H47.3l-14,74L19,884.74H0Z"
                      style="fill:#000b6c"
                    ></path>
                    <path
                      d="M705.14,142.86c-.84-3.36-1.68-4.62-3.36-5l-60.47-16L632.9,87.43c-.41-1.68-.83-2.94-2.52-3.36l-62.15-16.8-7.56-32.76c-.42-2.52-1.68-3.78-3.36-4.2L395.84.37a22,22,0,0,0-8,0L226.37,30.31c-1.66.42-3,1.68-3.36,4.2l-7.55,32.76L153.3,84.07c-1.7.42-2.11,1.68-2.52,3.36l-8.38,34.43-60.5,16c-1.66.42-2.53,1.68-3.36,5A434,434,0,0,0,71,224.34c0,241.9,126,451.87,314.12,577.05,2.53,1.66,5,3.36,6.72,3.36s4.21-1.7,6.72-3.36C586.71,676.2,712.7,466.24,712.7,224.34a432.34,432.34,0,0,0-7.56-81.48"
                      style="fill:#004eb3"
                    ></path>
                    <path
                      d="M368.33,690.09c0,1.71-1.68,2.53-3.35.87-46.19-52.91-77.28-117.59-98.27-188.12L234.83,523c-8.42,5.88-15.14,3.36-20.15-5.87-42.84-75.58-70.54-199.86-73.07-287.2,0-4.2.83-6.72,4.19-10.91,10.91-13.44,24.34-26.87,36.94-38.63,2.54-2.52,5.07-.84,5.07,3.35,0,107.49,18.45,207.42,47.85,272.92,2.53,5,5,5,8.38,2.52l9.24-5.87c-17.62-78.1-27.7-182.23-25.17-302.32,0-4.19.83-5.87,3.36-7.55a290,290,0,0,1,40.31-21c4.18-1.68,5-.85,5,2.52-2.53,174.66,11.78,295.59,42.84,392.16.84,2.51,3.36,1.68,3.36-.84-1.68-35.27-1.68-66.34-1.68-104.13l-1.68-301.47c0-3.36.84-5,4.2-5.88a337,337,0,0,1,42-7.56,2.22,2.22,0,0,1,2.51,2.52V690.09ZM553.08,217.33c0-33.6-38.64-61.3-89.86-64.66v175.5c64.67-37.78,89.86-75.57,89.86-110.84m-6.72,126c-17.64,0-33.59,6.72-83.14,42V575.07c85.66-95.74,110-161.24,110-194.83,0-23.51-10.93-36.95-26.88-36.95M418.72,691c-1.68,1.66-3.36.84-3.36-.87V99.76a2.22,2.22,0,0,1,2.52-2.51c112.53,7.55,184.75,54.58,184.75,122.59a114.09,114.09,0,0,1-29.39,76.42c36.94,10.08,51.22,37.79,51.22,74.74,0,65.5-47.87,173.83-205.74,320"
                      style="fill:#fff"
                    ></path>
                  </g>
                </g>
              </svg> */}
              <span>Warner Bros. Entertainment Inc.</span>
            </div>
          </div>
        </div>
      )}
    </>
  );
}

export default Credential;
